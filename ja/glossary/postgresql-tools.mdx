---
title: PostgreSQL ツール
description: ジェネレーター ノードで PostgreSQL ツールを使用して AI モデルを PostgreSQL データベースに接続し、クエリやデータ取得を可能にする方法を学びます。
---

<Warning>
  この機能は現在 **Private Preview** です。アクセスは一部のユーザーに限定されており、機能や提供状況は変更される可能性があります。
</Warning>

**PostgreSQL ツール**は、ジェネレーターノード内の AI モデルが PostgreSQL データベースに直接接続できるようにする機能です。「ツール使用」または「関数呼び出し」と呼ばれるこの機能により、プロンプト内の自然言語による指示に基づいて、テーブルのクエリ、データの取得、データベーススキーマの理解を行う AI エージェントを構築できます。

これにより、ビジネスレポートの生成、データに基づく質問への回答、自動データ分析など、強力なワークフローが実現します。

## PostgreSQL ツールの設定

以下の手順に従って、PostgreSQL データベースに接続し、ジェネレーターノードで特定のツールを有効にします。

### 1. ツールタブに移動する

任意のジェネレーターノード（例：`gemini-2.5-pro`）で、**Tools** タブを選択します。接続可能なインテグレーションの一覧が表示されます。

### 2. PostgreSQL に接続する

PostgreSQL インテグレーションの横にある **+ Connect** ボタンをクリックします。データベースの認証情報を追加するための設定モーダルが開きます。

### 3. 接続文字列を追加する

PostgreSQL データベースに接続するには、接続文字列を指定する必要があります。

<Info>
  接続文字列は通常、`postgresql://[user[:password]@][netloc][:port][/dbname][?param1=value1&...]` の形式に従います。詳細については、[PostgreSQL 公式ドキュメント](https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING)を参照してください。
</Info>

「Connect to PostgreSQL」ウィンドウで：

1.  **Connection Name**：識別しやすいように、接続に短くわかりやすい名前を付けます（例：「giselle-db-preview」）。この名前は他のノードとの連携に使用します。
2.  **Connection String**：このフィールドに PostgreSQL の接続文字列を貼り付けます。Giselle は保存前に接続文字列を認証付き暗号化で暗号化します。
3.  **Save & Connect** をクリックします。

### 4. 有効にするツールを選択する

接続が検証されると、利用可能な PostgreSQL ツールの一覧が表示されます。セキュリティと制御のため、AI モデルが実行できるアクションを明示的に選択する必要があります。

このノードで有効にするツールの横にあるチェックボックスをオンにします：
*   `getTableStructure`
*   `query`

### 5. 設定を保存する

必要なツールを選択したら、**Save & Connect** をクリックします。ジェネレーターノードに PostgreSQL が接続されたことが表示され、有効なツールと今後の変更を行うための **Configuration** ボタンが表示されます。

## 利用可能な PostgreSQL ツール

AI モデルで有効にできるツールの一覧です。

### スキーマ

*   `getTableStructure`：AI モデルがデータベースのスキーマを取得できるようにします。テーブル名、カラム名、データ型が含まれます。AI が有効なクエリを構築する方法を理解するために重要です。

### クエリ

*   `query`：AI モデルが接続されたデータベースに対して標準的な SQL クエリを実行し、結果を取得できるようにします。

## PostgreSQL ツールの使い方

設定が完了したら、プロンプト内で直接 AI モデルに有効なツールを使用するよう指示できます。モデルはリクエストを理解し、適切な関数を呼び出し、その結果を使用してタスクを完了します。

### プロンプト例：ユーザー数を計算する

`getTableStructure` と `query` ツールが有効になっているノードがあるとします。

```markdown
データベースからユーザーの総数を調べてください。
```

このプロンプトを実行すると、Giselle エージェントは次のように動作します：

1.  `getTableStructure` 関数を呼び出してデータベースの構造を理解する。
2.  関連するテーブル（例：`users`）を特定する。
3.  `SELECT COUNT(*) FROM users;` のような SQL クエリを作成する。
4.  `query` ツールを使用してクエリを実行する。
5.  クエリ結果に基づいて最終的な回答を返す（例：「ユーザーの総数は 1,234 人です。」）。
